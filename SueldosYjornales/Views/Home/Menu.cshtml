@{
    ViewBag.Title = "Menu";
}
@section scripts{
    <script src="~/Scripts/Home/Menu/Services/common.services.js"></script>
    <script src="~/Scripts/Home/Menu/Controllers/ubicacionSucUsuarioCtrl.js"></script>
    <script type="text/javascript">
        (function () {
            'use strict';
            angular
                .module('sueldosYjornalesApp')
                .factory('sYjResource', sYjResource);

            sYjResource.$inject = ['$resource'];

            function sYjResource($resource) {
                var empresas = $resource("@Href("~/api/Empresas")");
                var sucursales = $resource("@Href("~/api/Sucursales")");
                var sucursalesSegunEmpresaID = $resource("@Href("~/api/Sucursales/SegunEmpresaID")");

                return {
                    "empresas": empresas,
                    "Sucursales": sucursales,
                    "sucursalesSegunEmpresaID": sucursalesSegunEmpresaID
                }
            }
        })();
    </script>
}

<div class="container" style="margin-top:25px;" ng-controller="ubicacionSucUsuarioCtrl">
    <div class="panel panel-primary">
        <div class="panel-heading">Seleccionar sucursal de trabajo</div>
        <div class="panel-body">
            <form class="form-horizontal" role="form" name="ubicacionSucUsuariosForm">
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="empresa" class="col-md-3 control-label">Empresa</label>
                            <div class="col-md-9">
                                <select name="moneda" required
                                        ng-model="ubicacionSucUsuario.empresa"
                                        ng-options="r.nombreEmpresa for r in empresas" class="form-control"
                                        ng-required="true">
                                    <!--<option value="">-- Seleccione el concepto --</option>-->
                                    <option value="" ng-hide="ubicacionSucUsuario.empresa">Seleccione empresa</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <label for="sucursale" class="col-md-3 control-label">Sucursal</label>
                            <div class="col-md-9">
                                <select name="moneda" required
                                        ng-model="ubicacionSucUsuario.sucursale"
                                        ng-options="r.nombreSucursal for r in sucursales" class="form-control"
                                        ng-required="true">
                                    <!--<option value="">-- Seleccione el concepto --</option>-->
                                    <option value="" ng-hide="ubicacionSucUsuario.sucursale">Seleccione sucursal</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="col-md-9 col-md-offset-3">
                                <div class="panel panel-default">
                                    <div class="panel-heading">Aviso</div>
                                    <div class="panel-body">
                                        {{mensajeDelServidor}}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="form-group">
                            <div class="col-md-9 col-md-offset-3">
                                <button ng-click="vm.guardar()" ng-disabled="ubicacionSucUsuariosForm.$invalid" class="btn btn-default">
                                    Seleccionar Sucursal
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>
    @*<pre>{{ubicacionSucUsuario | json}}</pre>*@
</div>
